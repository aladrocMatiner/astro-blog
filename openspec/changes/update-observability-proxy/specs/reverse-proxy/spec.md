## MODIFIED Requirements

### Requirement: HAProxy routes HTTP traffic
The project SHALL provide an HAProxy-based reverse proxy that routes inbound HTTP requests to the Astro service and the Grafana dashboard based on the requested host headers.

#### Scenario: Request homepage through proxy
- **WHEN** a request is made to the proxy endpoint for `/` with `Host: www.aladroc-test.io`
- **THEN** the response is served by the Astro service

#### Scenario: Request Grafana through proxy
- **WHEN** a request is made to the proxy endpoint for `/` with `Host: grafana.aladroc-test.io`
- **THEN** the response is served by the Grafana backend without touching the Astro container

### Requirement: TLS certificates for documented hosts
HAProxy MUST terminate TLS for `www.aladroc-test.io` and `grafana.aladroc-test.io` using certificates generated by a repeatable script checked into the repository.

#### Scenario: Generate certificates
- **WHEN** a developer runs `scripts/generate-certs.sh`
- **THEN** a CA certificate plus TLS bundle for the documented hosts is generated under `certs/` and can be consumed by HAProxy

### Requirement: Extensible routing configuration
The HAProxy configuration MUST support adding additional host-based backends (for example, observability UIs) via versioned configuration changes.

#### Scenario: Add a new backend route
- **WHEN** a new backend is added to the HAProxy configuration
- **THEN** it can be exposed under a documented host or path without changing the Astro container
